<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro1</title>
    <link rel="stylesheet" href="css/CadastroForm.css">
    <link rel="shortcut icon" href="img/menuTop.png" type="image/x-icon">
</head>
<body>
    <a href="../login-register/selecionarUsuario.html"><img class="seta" src="img/seta.svg" alt="seta"></a>
    <h1>Cadastro</h1>
    <div class="container">

        <div class= "progress-bar">
          <div class="step" >
            <div class="bullet"id="bullet1">
          </div>
        </div>
    
          <div class="step" > 
            <div class="bullet" id="bullet2">
          </div>
          </div>
    
          <div class="step">
            <div class="bullet" id="bullet3">
          </div> 
          </div>

          <div class="step">
            <div class="bullet" id="bullet3">
          </div> 
          </div>

          <div class="step">
            <div class="bullet" id="bullet3">
          </div> 
          </div>

          <div class="step">
            <div class="bullet" id="bullet3">
          </div> 
          </div>

          <div class="step">
            <div class="bullet" id="bullet3">
          </div> 
          </div>
    
          <div class="step">
            <div class="bullet" id="bullet4">
          </div>
          </div>
        </div>
    </div>
    <p class="pessoais">Informações pessoais</p>
    <div class="content">
        <div class="content1">
          <div class="content">
            <div class="content1">
              <label for="name">Nome completo</label>
              <input type="text" id="name" required>
              <label for="">Gênero</label>
              <select class="genero" id="gender" required>
                <option value="" selected disabled>Selecionar</option>
                <option value="Feminino">Feminino</option>
                <option value="Masculino">Masculino</option>
                <option value="Outro">Outro</option>
              </select>
              <label for="">Data de nascimento</label>
              <input type="date" id="dateOfBirth" required>
              <label for="">CPF</label>
              <input type="text" id="cpf" placeholder="000.000.000-00" required>
        </div>

        <div class="content2">
          <label for="">RG</label>
          <input type="text" id="rg" required placeholder="00.000.000-0">
          <label for="">Número do celular</label>
          <input type="text" id="celular" required placeholder="(00) 00000-0000">
          <label for="email">Email</label>
          <input type="email" id="email" required>
        
        </div>
    </div>
    <div class="button-wrapper">
      <button type="submit" id="submit">Proximo</button>
  </div>  
  <script>
    // Puxar os dados digitados nos campos "Nome" e "Email" na tela de cadastro/login
    document.addEventListener('DOMContentLoaded', function() {
        const userName = localStorage.getItem('userName');
        const userEmail = localStorage.getItem('userEmail');

        if (userName) {
            document.getElementById("name").value = userName;
        }

        if (userEmail) {
            document.getElementById("email").value = userEmail;
        }
    });

    document.getElementById('submit').addEventListener('click', function(e) {
        e.preventDefault();

        // Verifica se todos os campos obrigatórios estão preenchidos
        if (!validateForm()) {
            alert("Por favor, preencha todos os campos obrigatórios.");
            return;
        }

        const dateOfBirth = document.getElementById("dateOfBirth").value;

        // Verifica se a idade é maior de 18 anos
        const age = calculateAge(new Date(dateOfBirth));
        if (age < 18) {
            alert("Você precisa ter mais de 18 anos para se cadastrar.");
            return;
        }

        const name = document.getElementById("name").value;
        const gender = document.getElementById("gender").value;
        const cpf = document.getElementById("cpf").value;
        const rg = document.getElementById("rg").value;
        const celular = document.getElementById("celular").value;
        const email= document.getElementById("email").value;

        localStorage.setItem('name', name);
        localStorage.setItem('gender', gender);
        localStorage.setItem('dateOfBirth', dateOfBirth);
        localStorage.setItem('cpf', cpf);
        localStorage.setItem('rg', rg);
        localStorage.setItem('celular', celular);
        localStorage.setItem('email', email);

        // Exibe o alerta após salvar os dados
        //alert('Dados salvos com sucesso! Você será redirecionado para a próxima etapa.');

        window.location.href = 'CadastroForm2.html';
    });



    // Função para validar se todos os campos obrigatórios estão preenchidos
    function validateForm() {
        const requiredFields = [
            document.getElementById("name"),
            document.getElementById("gender"),
            document.getElementById("dateOfBirth"),
            document.getElementById("cpf"),
            document.getElementById("rg"),
            document.getElementById("celular"),
            document.getElementById("email")
        ];

        for (let field of requiredFields) {
            if (!field.value) {
                return false; // Retorna falso se algum campo estiver vazio
            }
        }
        return true; // Retorna verdadeiro se todos os campos estiverem preenchidos
    }

    // Função para calcular a idade com base na data de nascimento
    function calculateAge(birthDate) {
        const today = new Date();
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    }
</script>  
</body>
</html>